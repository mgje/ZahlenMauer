// Generated by CoffeeScript 1.6.1
(function() {
  var bt, deleteZahlenmauer, genZahlenmauer, nextLayer;

  deleteZahlenmauer = function() {
    var zm, _results;
    zm = document.getElementById('zahlenmauer');
    _results = [];
    while (zm.hasChildNodes()) {
      _results.push(zm.removeChild(zm.lastChild));
    }
    return _results;
  };

  nextLayer = function(l, offset) {
    var children, e, ma, t, z, zm, _i, _len, _results;
    if (offset == null) {
      offset = 0;
    }
    zm = document.getElementById('zahlenmauer');
    t = document.createElement('div');
    t.className = 'table';
    t.style.position = 'relative';
    t.style.left = offset + 'px';
    ma = document.createElement('div');
    ma.className = 'mauer';
    t.appendChild(ma);
    children = zm.children;
    if (children.length === 0) {
      zm.appendChild(t);
    } else {
      zm.insertBefore(t, children[0]);
    }
    _results = [];
    for (_i = 0, _len = l.length; _i < _len; _i++) {
      z = l[_i];
      e = document.createElement('div');
      e.className = 'block';
      e.appendChild(document.createTextNode(z));
      _results.push(ma.appendChild(e));
    }
    return _results;
  };

  genZahlenmauer = function(zahlenmauer) {
    var i, offset, tmp, _i, _ref, _results;
    offset = 0;
    nextLayer(zahlenmauer, offset);
    _results = [];
    while (zahlenmauer.length >= 2) {
      offset += 40;
      tmp = [];
      for (i = _i = 0, _ref = zahlenmauer.length - 2; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
        tmp[i] = zahlenmauer[i] + zahlenmauer[i + 1];
      }
      zahlenmauer = tmp;
      _results.push(nextLayer(zahlenmauer, offset));
    }
    return _results;
  };

  window.evaluateInput = function(form) {
    var input, z, zm, _i, _len, _ref;
    input = form.input1.value;
    zm = [];
    _ref = input.split(',');
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      z = _ref[_i];
      zm.push(parseInt(z));
    }
    deleteZahlenmauer();
    return genZahlenmauer(zm);
  };

  document.forms[0].onkeypress = function(e) {
    if (!e) {
      e = window.event;
    }
    if (e.keyCode === 13) {
      window.evaluateInput(document.forms[0]);
      return false;
    }
  };

  bt = document.forms[0].button;

  bt.onclick = function(e) {
    return window.evaluateInput(document.forms[0]);
  };

  window.evaluateInput(document.forms[0]);

}).call(this);
